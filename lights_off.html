<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<script>
//Question(b)
function press(i,j) {
	if (i==0){
		 if (j==0){toggle(i,j);toggle(i+1,j);toggle(i,j+1);}
		 else if (j==4){toggle(i,j);toggle(i+1,j);toggle(i,j-1);}
		 else {toggle(i,j);toggle(i+1,j);toggle(i,j-1);toggle(i,j+1);}
	}
	else if (i==1){
	     if (j==0){toggle(i,j);toggle(i-1,j);toggle(i+1,j);toggle(i,j+1);}
		 else if (j==4){toggle(i,j);toggle(i-1,j);toggle(i+1,j);toggle(i,j-1);}
		 else {toggle(i,j);toggle(i+1,j);toggle(i-1,j);toggle(i,j+1);toggle(i,j-1);}
	}
	else if (i==2){
	     if (j==0){toggle(i,j);toggle(i-1,j);toggle(i+1,j);toggle(i,j+1);}
		 else if (j==4){toggle(i,j);toggle(i-1,j);toggle(i+1,j);toggle(i,j-1);}
		 else {toggle(i,j);toggle(i+1,j);toggle(i-1,j);toggle(i,j+1);toggle(i,j-1);}	
	}
	else if (i==3){
		 if (j==0){toggle(i,j);toggle(i-1,j);toggle(i+1,j);toggle(i,j+1);}
		 else if (j==4){toggle(i,j);toggle(i-1,j);toggle(i+1,j);toggle(i,j-1);}
		 else {toggle(i,j);toggle(i+1,j);toggle(i-1,j);toggle(i,j+1);toggle(i,j-1);}
	}
	else if (i==4){
		 if (j==0){toggle(i,j);toggle(i-1,j);toggle(i,j+1);}
		 else if (j==4){toggle(i,j);toggle(i-1,j);toggle(i,j-1);}
		 else {toggle(i,j);toggle(i-1,j);toggle(i,j-1);toggle(i,j+1);}		
	}

     checkAllOff()	//Call the function checkAllOff().
}


//Question(c):construct the function checkAllOff().
function checkAllOff(){
     var check_light="AllOff";	//Set the default value AllOff, which means all lights off.
	 
	 //To check if there is still light on.
	for (var i =0; i<5; i++){
		 for (var j=0; j<5; j++){
		 k =document.getElementById("but_" + i + j);
			 if (k.innerHTML == "O") {
			 check_light="Lighton";
			 break;
			 }//Even if one light on, the value of check_light will become "Lighton".
	    }
	}

    var f=document.getElementById("check");
	if (check_light == "Lighton"){
	f.innerHTML="Still lights on";
	}else if(check_light=="AllOff"){
	f.innerHTML="All lights out! You win!";
	}

}


function toggle(i,j) {
      b=document.getElementById("but_" + i + j)
      t = b.innerHTML
      if (t=="X") {b.innerHTML = "O";
                   b.setAttribute( "style", "color:red; background-color:yellow" )
                  }
      if (t=="O") {b.innerHTML = "X";
                   b.setAttribute( "style", "color:white; background-color:black" )
                  }
}



function generateGrid() {
        var d = document.getElementById("button-grid");
        var table = document.createElement("table");
		
        d.appendChild(table);
        for (var i = 0; i < 5; i++) {
                var row = document.createElement("tr");
                for (var j = 0; j < 5; j++) {
                        var cell = document.createElement("td");
                        cell.innerHTML = "<button type=button id=but_" + i + j +
                                         " onclick=\"press(" +i + ',' +j + ")\"" + 
                                         " style=\"color:red; background-color:yellow;float:center\"" +
                                         ">O</button>" ;
                        row.appendChild(cell);
                }
                table.appendChild(row);
        }
        toggle(2,2) // Set middle button to off state (otherwise it seems to be impossible).
		
}

window.onload = function() {
        generateGrid();
};

</script> 
<title>Lights Off Puzzle</title>

<!-- Question(a):To make the contents in the center -->
<style>
 h1,p{
 text-align:center;
 }
 table{
 margin-left:auto;margin-right:auto;
 }
</style>
</head> 

<body>
<!-- Question(a):Add the heading -->
<h1><b>***Lights off***</b></h1>
<p><b>Click on buttons until they all turn black</b></p>

<div id="button-grid"></div>

<!-- CheckAllOff_Sentence -->
<p id="check"><p>

</body>

</html>
